# Application Configuration
spring.application.name=StreamShift
server.port=8080

# Kafka Configuration
spring.kafka.bootstrap-servers=localhost:9092
spring.kafka.consumer.group-id=streamshift-consumer-group
spring.kafka.consumer.auto-offset-reset=earliest
spring.kafka.consumer.enable-auto-commit=false
spring.kafka.consumer.key-deserializer=org.apache.kafka.common.serialization.StringDeserializer
spring.kafka.consumer.value-deserializer=org.apache.kafka.common.serialization.StringDeserializer

# Consumer specific settings
spring.kafka.consumer.properties.session.timeout.ms=30000
spring.kafka.consumer.properties.heartbeat.interval.ms=3000
spring.kafka.consumer.properties.max.poll.records=100
spring.kafka.consumer.properties.max.poll.interval.ms=300000

# Source Database Configuration (PostgreSQL) - matches docker-compose
streamshift.source.db.url=jdbc:postgresql://localhost:5432/inventory
streamshift.source.db.username=postgres
streamshift.source.db.password=postgres

# Target Database Configuration (PostgreSQL) - matches docker-compose
streamshift.target.db.url=jdbc:postgresql://localhost:5433/inventory_target
streamshift.target.db.username=postgres
streamshift.target.db.password=postgres

# Debezium/CDC Configuration
streamshift.cdc.topic-pattern=dbserver1\\.inventory\\..*

# Migration Configuration
streamshift.migration.batch-size=1000
streamshift.migration.enable-upsert=true
streamshift.migration.conflict-resolution=latest-wins

# Schema Management
streamshift.schema.auto-create-tables=true
streamshift.schema.replicate-constraints=true
streamshift.schema.cache-metadata=true

# Error Handling
streamshift.error.max-retries=3
streamshift.error.retry-delay-ms=1000
streamshift.error.dead-letter-topic=streamshift-errors

# Monitoring and Metrics
management.endpoints.web.exposure.include=health,info,metrics,prometheus
management.endpoint.health.show-details=always
management.metrics.export.prometheus.enabled=true
management.endpoint.prometheus.enabled=true

# Logging Configuration
logging.level.com.jonathantong.StreamShift=DEBUG
logging.level.org.apache.kafka=WARN
logging.level.io.debezium=INFO
logging.level.org.springframework.kafka=DEBUG

# Logging pattern
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n

# Performance Tuning
spring.datasource.hikari.maximum-pool-size=20
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000

# JSON Processing
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.time-zone=UTC

